cd /mnt/genetica_2
mkdir Lucas
cd Lucas
mkdir enigma
cd enigma
mkdir acapulco
mkdir input
cd acapulco

cp -R /mnt/imagem_2/inpd_wave_0/10001/T1_run_s5/T1_run_s5.nii.gz /mnt/imagem_2/inpd_wave_0/10006/T1_run_s6/T1_run_s6.nii.gz /mnt/genetica_2/Lucas/input

wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id=1UTTYaIpJNv0CmYA43woCdJLnaatAaamL' -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')&id=1UTTYaIpJNv0CmYA43woCdJLnaatAaamL" -O acapulco-0.2.1.tar.gz && rm -rf /tmp/cookies.txt

wget --no-check-certificate 'https://docs.google.com/uc?export=download&id=1JyUd37wshsxraWCO1yetvP82FS4kasvr' -O QC_scripts.zip
unzip QC_scripts.zip

wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id=1y5k-tFNcaQAiyXVi1Nm_yJFF8pzBR356' -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')&id=1y5k-tFNcaQAiyXVi1Nm_yJFF8pzBR356" -O calculate_icv.tar && rm -rf /tmp/cookies.txt

#cd acapulco
mkdir output
cp ../input/T1_run_s5.nii.gz output/T1_run_s5/

# single run
singularity run --cleanenv -B $PWD:$PWD acapulco-0.2.1.sif -i output/T1_run_s5/T1_run_s5.nii.gz -o output/T1_run_s5

# multiple run
# creating file list ids
cd /mnt/genetica_2/Lucas/enigma/input
ls $PWD/*.nii.gz >> file_list.txt

# move list to acapulco folder
mv file_list.txt ../acapulco
cd ../acapulco

# loop do singularity para seccionar o cerebelo (6min50s para 2 amostras)
for file in $(cat file_list.txt); do
subj=$(basename $file .nii.gz)
mkdir output/${subj}
cp $file output/${subj}
singularity run --cleanenv -B $PWD:$PWD acapulco-0.2.1.sif -i output/${subj}/${subj}.nii.gz -o output/${subj};
done

# test copiando o script do vídeo, ele faz boa parte menos a correção para o ICV
singularity exec --cleanenv -B $PWD:$PWD ./R.sif Rscript ./QC_Master.R ./output





até 13min intro software e cerebelo, até 53min acapulco qc q&a, até final SUIT


module load singularity

### singularity
wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id=1mfai0lZLX2jSZCd8NRyMSR0DTtkOeNKH' -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')&id=1mfai0lZLX2jSZCd8NRyMSR0DTtkOeNKH" -O acapulco-0.2.1.sif && rm -rf /tmp/cookies.txt


wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id=12kncXwW9bG14LbGmJQoRf-v2AI9FCfkB' -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')&id=12kncXwW9bG14LbGmJQoRf-v2AI9FCfkB" -O R.sif && rm -rf /tmp/cookies.txt


